'use client'
import { Phone } from 'lucide-react'
import { Magnetic } from '@/components/ui/magnetic'

interface ContactButtonProps {
  phoneNumber: string;
}

const ZaloIcon = () => {
  return (
    <svg width="15" height="15" viewBox="0 0 300 300" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
      <path 
        d="M150 0C67.5 0 0 67.5 0 150C0 232.5 67.5 300 150 300C232.5 300 300 232.5 300 150C300 67.5 232.5 0 150 0ZM152.498 96.9002C159.6 96.7502 163.8 96.9002 169.949 97.5002C177.299 98.1002 183.448 101.1 187.199 107.4C189.299 111 190.349 114.9 190.949 119.249C191.398 124.199 191.848 129.15 191.098 134.1C190.048 142.199 186.6 148.349 178.648 151.649C174.449 153.449 170.1 154.35 165.6 154.35C155.699 154.35 145.8 154.35 136.05 154.35C133.2 154.35 131.25 155.55 129.748 158.1C128.25 160.499 126.6 163.05 125.1 165.449C124.35 166.499 124.2 166.649 123.15 165.449C121.65 163.8 120.15 162.15 118.949 160.35C117.75 158.4 117.149 156.45 117.149 154.049C117.149 137.249 117.149 120.6 117.149 103.8C117.149 97.0502 121.35 97.0502 125.699 97.0502C134.25 96.9002 143.399 97.0502 152.498 96.9002ZM232.35 175.5C232.35 176.25 232.35 176.55 232.35 177C232.35 181.049 232.35 185.249 232.35 189.299C232.35 194.849 230.249 198.75 224.998 200.999C222.899 201.899 220.499 202.499 217.948 202.499C212.848 202.499 207.749 202.499 202.649 202.349C202.5 202.349 202.2 202.349 201.9 202.349C198.899 202.349 198.149 202.999 197.249 205.648C196.199 208.648 195.149 211.648 193.948 214.648C193.648 215.548 193.199 216.298 192.899 217.198C192.449 216.749 192.298 216.598 192.149 216.449C189.149 212.998 186.299 209.549 183.299 206.099C181.949 204.599 180.449 203.548 178.348 203.548C166.649 203.398 154.948 203.548 143.25 203.398C137.849 203.399 134.549 200.699 134.249 195.299C134.099 191.85 134.099 188.399 134.099 184.949C134.099 168.15 134.099 151.5 134.099 134.7C134.099 128.85 137.399 125.699 143.399 125.699C165.449 125.699 187.498 125.699 209.398 125.699C213.748 125.699 218.098 126.6 221.698 129.449C226.498 133.5 228.598 138.9 229.198 144.899C229.499 147.6 229.499 150.299 229.499 153.15C229.499 160.199 231.149 167.55 232.35 175.5ZM82.0498 125.699C82.0498 125.699 97.3494 125.699 106.95 125.699C112.649 125.699 116.1 129.149 116.1 134.85C116.1 151.349 116.1 167.849 116.1 184.349C116.1 192 111.6 195.899 104.4 193.799C103.35 193.5 102.3 192.9 101.55 192.3C92.2494 184.949 82.9498 177.599 73.6494 170.099C72.1494 168.899 70.9498 167.549 70.9498 165.449C70.9498 159.75 70.9498 154.05 70.9498 148.35C70.9498 139.5 70.9498 130.649 70.9498 121.799C70.9498 121.05 71.099 120.299 71.2494 119.699C72.1494 116.1 74.8498 125.699 82.0498 125.699Z" 
      />
      <path 
        d="M166.05 108.45C164.55 108.45 163.8 108.45 162.9 108.45C160.5 108.45 158.1 108.45 155.699 108.45C153.3 108.45 152.25 109.5 152.25 111.9C152.25 119.85 152.25 127.8 152.25 135.75C152.25 138.449 153.149 139.349 155.85 139.349C162.6 139.349 169.35 139.349 176.099 139.349C179.998 139.349 182.849 138.149 183.898 134.1C185.099 129.6 184.799 124.949 183.299 120.449C181.349 113.25 176.699 108.6 166.05 108.45Z" 
      />
      <path 
        d="M183.898 186.9C183.898 185.25 183.898 183.75 183.898 182.249C183.898 175.199 183.898 168.15 183.898 161.099C183.898 159 183.149 158.25 181.049 158.25C173.099 158.25 165.15 158.25 157.2 158.25C154.199 158.25 151.199 158.25 148.05 158.25C145.949 158.25 145.199 159 145.199 161.099C145.199 174.45 145.199 187.649 145.199 200.999C145.199 202.799 145.949 203.399 147.75 203.399C156.15 203.399 164.55 203.399 172.948 203.399C173.549 203.399 174.299 203.399 174.898 203.399C176.699 203.399 177.749 202.049 178.799 200.699C181.949 196.5 184.949 192.299 188.099 188.099C188.249 187.949 188.399 187.649 188.549 187.5C188.849 187.199 189.299 186.899 189.598 186.9C184.199 186.9 184.349 186.9 183.898 186.9Z" 
      />
    </svg>
  );
};

function ContactLink({ 
  children, 
  onClick, 
  label 
}: { 
  children: React.ReactNode, 
  onClick: () => void,
  label: string
}) {
  return (
    <Magnetic springOptions={{ bounce: 0 }} intensity={0.3}>
      <button
        onClick={onClick}
        className="group relative inline-flex shrink-0 items-center gap-[1px] rounded-full bg-zinc-100 px-2.5 py-1 text-sm text-black transition-colors duration-200 hover:bg-zinc-950 hover:text-zinc-50 dark:bg-zinc-800 dark:text-zinc-100 dark:hover:bg-zinc-700"
        aria-label={label}
        title={label}
      >
        {children}
        <svg
          width="15"
          height="15"
          viewBox="0 0 15 15"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className="h-3 w-3"
        >
          <path
            d="M3.64645 11.3536C3.45118 11.1583 3.45118 10.8417 3.64645 10.6465L10.2929 4L6 4C5.72386 4 5.5 3.77614 5.5 3.5C5.5 3.22386 5.72386 3 6 3L11.5 3C11.6326 3 11.7598 3.05268 11.8536 3.14645C11.9473 3.24022 12 3.36739 12 3.5L12 9.00001C12 9.27615 11.7761 9.50001 11.5 9.50001C11.2239 9.50001 11 9.27615 11 9.00001V4.70711L4.35355 11.3536C4.15829 11.5488 3.84171 11.5488 3.64645 11.3536Z"
            fill="currentColor"
            fillRule="evenodd"
            clipRule="evenodd"
          ></path>
        </svg>
      </button>
    </Magnetic>
  );
}

export function ContactButtons({ phoneNumber }: ContactButtonProps) {
  const formattedPhoneNumber = phoneNumber.replace(/\s/g, '');
  
  const handlePhoneCall = () => {
    window.open(`tel:${formattedPhoneNumber}`, '_blank');
  };

  const handleZaloContact = () => {
    window.open(`https://zalo.me/${formattedPhoneNumber}`, '_blank');
  };

  return (
    <>
      <ContactLink onClick={handlePhoneCall} label="Gọi điện thoại">
        Điện thoại
      </ContactLink>
      <ContactLink onClick={handleZaloContact} label="Liên hệ Zalo">
        Zalo
      </ContactLink>
    </>
  )
}
